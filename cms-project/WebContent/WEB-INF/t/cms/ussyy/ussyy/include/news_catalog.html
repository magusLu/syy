[#assign path=channel.path!]
[#if path?index_of('news') gt -1]
    [#assign target='news']
[#else]
    [#assign target='events']
[/#if]
<div class="content-events col-xs-3  col-sm-3 col-md-3">
    <div class="content-events--title">
        <span>NEWS & EVENT</span>
    </div>
    <div class="content-sidebar">
        <div class="sidebar-catalog about-catalog" id="sidebar-panel">
            <div class="panel-items panel [#if target=='news']current-catalog[/#if]">
                <div class="catalog-items">
                    <!-- <a href="#school" data-toggle="collapse" data-parent="#sidebar-panel"> -->
                    <a href="/cms/news/index.jhtml">
                        <span>CAMPUS NEWS</span>
                        <!-- <i class="icon panel-icon col-open"></i> -->
                    </a>
                </div>
                <!-- <div id="school" class="panel-collapse collapse in">
                    <ul class="panel-secondary panel-body">
                        <li class="panel-secondary--items">
                            <a href="/${res}/overview">OVERVIEW</a>
                        </li>
                        <li class="panel-secondary--items">
                            <a href="/${res}/history">HISTORY</a>
                        </li>
                        <li class="panel-secondary--items current-item">
                            <a href="/${res}/dean">DEAN'MESSAGE</a>
                        </li>
                        <li class="panel-secondary--items">
                            <a href="/${res}/organizational">ORGANIZATIONAL STRUCURE</a>
                        </li>
                    </ul>
                </div> -->
            </div>
            <div class="panel-items panel [#if target=='events']current-catalog[/#if]">
                <div class="catalog-items">
                    <!-- <a href="#campus" data-toggle="collapse" data-parent="#sidebar-panel"> -->
                    <a href="/cms/events/index.jhtml">
                        <span>EVENTS</span>
                        <!-- <i class="icon panel-icon"></i> -->
                    </a>
                </div>
                <!-- <div id="campus" class="panel-collapse collapse">
                    <ul class="panel-secondary panel-body">
                        <li class="panel-secondary--items">
                            <a href="javascript:;">OVERVIEW</a>
                        </li>
                        <li class="panel-secondary--items">
                            <a href="javascript:;">HISTORY</a>
                        </li>
                        <li class="panel-secondary--items">
                            <a href="javascript:;">DEAN'MESSAGE</a>
                        </li>
                        <li class="panel-secondary--items">
                            <a href="javascript:;">ORGANIZATIONAL STRUCURE</a>
                        </li>
                    </ul>
                </div> -->
            </div>
        </div>
        <div class="sidebar-items sidebar-browse">
            <div class="sidebar-title">BROWSE BY MONTH</div>
            <div class="sidebar-title--underline"></div>
            <div class="sidebar-content--wrap">
                <div class="sidebar-date">
                    <div class="sidebar-date--input">
                        <input id="year" type="text" readonly>
                        <div class="date-btn">
                            <i class="date-btn-up" onclick="add()"></i>
                            <i class="date-btn-down" onclick="sub()"></i>
                        </div>
                    </div>
                    <div class="sidebar-date--select">
                        <div class="date-row">
                            <div class="date-col date-jan"><span>JAN</span></div>
                            <div class="date-col date-feb">FEB</div>
                            <div class="date-col date-mar">MAR</div>
                        </div>
                        <div class="date-row">
                            <div class="date-col date-apr">APR</div>
                            <div class="date-col date-may">MAY</div>
                            <div class="date-col date-jun">JUN</div>
                        </div>
                        <div class="date-row">
                            <div class="date-col date-jul">JUL</div>
                            <div class="date-col date-aug">AUG</div>
                            <div class="date-col date-set">SET</div>
                        </div>
                        <div class="date-row">
                            <div class="date-col date-oct">OCT</div>
                            <div class="date-col date=nov">NOV</div>
                            <div class="date-col date-dec">DEC</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="sidebar-items sidebar-browse">
            <div class="sidebar-title">SUBJECT</div>
            <div class="sidebar-title--underline"></div>
            <div class="sidebar-content--wrap">
                <ul class="sidebar-subject">
                    <li class="sidebar-subject--items">
                        <a href="javascript:;">
                            <span>All</span>
                            <i class="icon subjec-arrow"></i>
                        </a>
                    </li>
                    <li class="sidebar-subject--items">
                        <a href="javascript:;">
                            <span>Research</span>
                            <i class="icon subjec-arrow"></i>
                        </a>
                    </li>
                    <li class="sidebar-subject--items">
                        <a href="javascript:;">
                            <span>Announcements</span>
                            <i class="icon subjec-arrow"></i>
                        </a>
                    </li>
                    <li class="sidebar-subject--items">
                        <a href="javascript:;">
                            <span>Around Campus</span>
                            <i class="icon subjec-arrow"></i>
                        </a>
                    </li>
                    <li class="sidebar-subject--items">
                        <a href="javascript:;">
                            <span>International</span>
                            <i class="icon subjec-arrow"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    var maxYear='';
    var minYear='';
    $(function () {

        [#assign currYear=.now?string("yyyy")]
        [#assign maxYear='']
        [#assign minYear='']
        [@cms_channel_list parentId='319']
        [#list tag_list as tag]
        [#if tag_index==0]
        [#assign maxYear=tag.name]
        [#assign minYear=tag.name]
        [#else]
        [#if maxYear?number lt tag.name?number]
        [#assign maxYear=tag.name]
        [/#if]
            [#if minYear?number gt tag.name?number]
        [#assign minYear=tag.name]
        [/#if]
            [/#if]
            [/#list]
            [/@cms_channel_list]
            [#if maxYear?number gt currYear?number][#assign maxYear=currYear?number][/#if]
            maxYear=${maxYear!.now?string("yyyy")};
        minYear=${minYear!.now?string("yyyy")};

        $("#year").val(maxYear);


        init();

        var path='${channel.path!}';
        if (path!="" && path!='newsevent'&& path!='news' && path!='events'){
            var selectYear=parseInt(path.substring(path.length-6,path.length-2));
            $("#year").val(selectYear);

            var selectMonth=parseInt(path.substring(path.length-2));
            $("div.sidebar-date--select div.date-col").eq(selectMonth-1).addClass("date-select");
        }
    })

    function add() {
        var year=$("#year").val();
        if (year < maxYear){
            $("#year").val(Number(year)+1);
        }
    }

    function sub() {
        var year=$("#year").val();
        if (year > minYear){
            $("#year").val(Number(year)-1);
        }
    }

    function init() {
        $("div.sidebar-date--select div.date-col").on("click",function () {
            var month='';
            var index=$("div.sidebar-date--select div.date-col").index($(this))+1;
            month=index+'';
            if (index < 10){
                month='0'+index;
            }

            var year=$("#year").val();
            var target='${target!'news'}'
            var url='/cms/'+target+year+month+'/index.jhtml';
            window.location.href=url;
        })
    }
</script>